{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\clair\\\\Desktop\\\\cours\\\\l3-informatique\\\\printemps\\\\Douapolis\\\\lifprojet\\\\douapolis\\\\src\\\\Accueil.js\",\n  _s = $RefreshSig$();\nimport { Form, Button, Container, InputGroup } from \"react-bootstrap\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { useState, React, useEffect, useContext } from 'react';\nimport Navigation from \"./Navigation\";\nimport './index.css';\nimport { hasAuthenticated } from \"./testAuth/AuthApi\";\nimport { UserContext } from \"./testAuth/userAuth\";\n\n//page d'accueil du jeu\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Accueil() {\n  _s();\n  //Variable permettant de récupérer et utiliser les données lors d'un changement d'état\n  const [codePartie, setcodePartie] = useState('');\n  let navigate = useNavigate();\n  //fonction de lancement de partie\n  async function lancePartie(event) {\n    event.preventDefault();\n    if (codePartie !== \"\") {\n      const response = await fetch(`http://localhost:5000/game/${codePartie}`);\n      if (!response.ok) {\n        const message = `An error has occurred: ${response.statusText}`;\n        window.alert(message);\n        return;\n      }\n      const game = await response.json();\n      if (game) {\n        var val = window.confirm(\"Etes-vous sur de vouloir rejoindre cette partie ?\");\n        if (val === true) {\n          if (game.nbJoueursCo === game.nbJoueurs) {\n            alert(\"Cette partie est pleine\");\n          } else {\n            navigate(`/SalleAttente?${codePartie}`, {\n              replace: true\n            });\n          }\n        }\n      } else {\n        alert(\"Cette partie n'existe pas\");\n      }\n    } else {\n      alert(\"Merci de rentrer un code de partie.\");\n    }\n  }\n  ;\n  const [userState, setUserState] = useContext(UserContext);\n  useEffect(() => {\n    async function fetchData() {\n      setUserState(state => ({\n        ...state,\n        userLogged: hasAuthenticated()\n      }));\n    }\n    fetchData();\n    return;\n  }, [setUserState]);\n  //formulaire et titre afficher sur la page \n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"body\",\n    children: [/*#__PURE__*/_jsxDEV(Navigation, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"Douapolis\",\n        children: /*#__PURE__*/_jsxDEV(\"center\", {\n          children: /*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \" DOUAPOLI$ \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"Centre\",\n        children: [userState.userLogged === false && /*#__PURE__*/_jsxDEV(Form.Label, {\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/Connexion\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"button1\",\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                size: \"lg\",\n                type: \"submit\",\n                children: \" Connexion \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 68,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 67,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 25\n        }, this) || /*#__PURE__*/_jsxDEV(Form.Label, {\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/NewJeu\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"button1\",\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                size: \"lg\",\n                type: \"submit\",\n                children: \" Cr\\xE9er ma Partie \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 76,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"rejPartie\",\n          children: /*#__PURE__*/_jsxDEV(InputGroup, {\n            size: \"lg\",\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              variant: \"primary\",\n              id: \"lg\",\n              disabled: true,\n              children: \"Rejoindre une partie \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              name: \"codePartie\",\n              type: \"text\",\n              align: \"center\",\n              placeholder: \"CODE PARTIE\",\n              value: codePartie,\n              onChange: e => setcodePartie(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              size: \"lg\",\n              type: \"submit\",\n              onClick: lancePartie,\n              children: \" Jouer \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 9\n  }, this);\n}\n_s(Accueil, \"zv6F84EtDHfpN4n5g13j4z+peg0=\", false, function () {\n  return [useNavigate];\n});\n_c = Accueil;\nexport default Accueil;\nvar _c;\n$RefreshReg$(_c, \"Accueil\");","map":{"version":3,"names":["Form","Button","Container","InputGroup","Link","useNavigate","useState","React","useEffect","useContext","Navigation","hasAuthenticated","UserContext","jsxDEV","_jsxDEV","Accueil","_s","codePartie","setcodePartie","navigate","lancePartie","event","preventDefault","response","fetch","ok","message","statusText","window","alert","game","json","val","confirm","nbJoueursCo","nbJoueurs","replace","userState","setUserState","fetchData","state","userLogged","className","children","fileName","_jsxFileName","lineNumber","columnNumber","Label","to","size","type","variant","id","disabled","Control","name","align","placeholder","value","onChange","e","target","onClick","_c","$RefreshReg$"],"sources":["C:/Users/clair/Desktop/cours/l3-informatique/printemps/Douapolis/lifprojet/douapolis/src/Accueil.js"],"sourcesContent":["import {Form,Button, Container,InputGroup} from \"react-bootstrap\";\r\nimport {Link, useNavigate} from \"react-router-dom\";\r\nimport {useState, React,useEffect,useContext} from 'react';\r\nimport Navigation from \"./Navigation\";\r\nimport './index.css' \r\nimport { hasAuthenticated } from \"./testAuth/AuthApi\";\r\nimport { UserContext } from \"./testAuth/userAuth\";\r\n\r\n//page d'accueil du jeu\r\n\r\nfunction Accueil() {\r\n    //Variable permettant de récupérer et utiliser les données lors d'un changement d'état\r\n    const [codePartie, setcodePartie] = useState(''); \r\n    let navigate = useNavigate();\r\n    //fonction de lancement de partie\r\n    async function lancePartie(event){\r\n        event.preventDefault();\r\n        if(codePartie !== \"\") {\r\n            const response = await fetch(`http://localhost:5000/game/${codePartie}`);\r\n            if (!response.ok) {\r\n                const message = `An error has occurred: ${response.statusText}`;\r\n                window.alert(message);\r\n                return;\r\n            }\r\n            const game = await response.json();\r\n            if (game) {\r\n                var val = window.confirm(\"Etes-vous sur de vouloir rejoindre cette partie ?\");\r\n                if( val === true ) {\r\n\r\n                    if(game.nbJoueursCo===game.nbJoueurs){\r\n                        alert(\"Cette partie est pleine\");\r\n                    }\r\n                    else{\r\n                        navigate(`/SalleAttente?${codePartie}`, {replace : true});\r\n                    }\r\n                }\r\n            }\r\n            else{\r\n                alert(\"Cette partie n'existe pas\");\r\n            }\r\n        }\r\n        else{\r\n            alert(\"Merci de rentrer un code de partie.\");\r\n        }\r\n    };\r\n    const [userState, setUserState] = useContext(UserContext);\r\n    useEffect(() => {\r\n        async function fetchData() {\r\n            setUserState((state) => ({ ...state, userLogged: hasAuthenticated() }));\r\n        }\r\n        fetchData();\r\n        return;\r\n      }, [setUserState]);\r\n    //formulaire et titre afficher sur la page \r\n    return(\r\n        <div className=\"body\">\r\n            <Navigation/>\r\n            <Container>\r\n                <div className=\"Douapolis\">\r\n                    <center><h1> DOUAPOLI$ </h1></center>\r\n                </div>\r\n                {/*ici on devra modifier le bouton connexion si la personne est deja connectee, en un bouton creation de partie*/}\r\n                <div className=\"Centre\"> \r\n                    {(userState.userLogged===false && (\r\n                        <Form.Label>\r\n                            <Link to=\"/Connexion\">\r\n                                <div className=\"button1\">\r\n                                    <Button size=\"lg\" type=\"submit\"> Connexion </Button>\r\n                                </div>\r\n                            </Link>\r\n                        </Form.Label>\r\n                    )) || (\r\n                        <Form.Label>\r\n                            <Link to=\"/NewJeu\">\r\n                                <div className=\"button1\">\r\n                                    <Button size=\"lg\" type=\"submit\" > Créer ma Partie </Button>\r\n                                </div>\r\n                            </Link>\r\n                        </Form.Label>\r\n                    )}\r\n                    <div className=\"rejPartie\">\r\n                        <InputGroup size=\"lg\">\r\n                            <Button variant=\"primary\" id=\"lg\" disabled>Rejoindre une partie </Button>\r\n                            <Form.Control name=\"codePartie\" type=\"text\" align=\"center\" placeholder=\"CODE PARTIE\" \r\n                                value={codePartie} onChange={e => setcodePartie(e.target.value)}\r\n                            />\r\n                            <Button size=\"lg\" type=\"submit\" onClick={lancePartie}> Jouer </Button>\r\n                        </InputGroup>\r\n                    </div>\r\n                </div>\r\n            </Container>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Accueil"],"mappings":";;AAAA,SAAQA,IAAI,EAACC,MAAM,EAAEC,SAAS,EAACC,UAAU,QAAO,iBAAiB;AACjE,SAAQC,IAAI,EAAEC,WAAW,QAAO,kBAAkB;AAClD,SAAQC,QAAQ,EAAEC,KAAK,EAACC,SAAS,EAACC,UAAU,QAAO,OAAO;AAC1D,OAAOC,UAAU,MAAM,cAAc;AACrC,OAAO,aAAa;AACpB,SAASC,gBAAgB,QAAQ,oBAAoB;AACrD,SAASC,WAAW,QAAQ,qBAAqB;;AAEjD;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAEA,SAASC,OAAOA,CAAA,EAAG;EAAAC,EAAA;EACf;EACA,MAAM,CAACC,UAAU,EAAEC,aAAa,CAAC,GAAGZ,QAAQ,CAAC,EAAE,CAAC;EAChD,IAAIa,QAAQ,GAAGd,WAAW,EAAE;EAC5B;EACA,eAAee,WAAWA,CAACC,KAAK,EAAC;IAC7BA,KAAK,CAACC,cAAc,EAAE;IACtB,IAAGL,UAAU,KAAK,EAAE,EAAE;MAClB,MAAMM,QAAQ,GAAG,MAAMC,KAAK,CAAE,8BAA6BP,UAAW,EAAC,CAAC;MACxE,IAAI,CAACM,QAAQ,CAACE,EAAE,EAAE;QACd,MAAMC,OAAO,GAAI,0BAAyBH,QAAQ,CAACI,UAAW,EAAC;QAC/DC,MAAM,CAACC,KAAK,CAACH,OAAO,CAAC;QACrB;MACJ;MACA,MAAMI,IAAI,GAAG,MAAMP,QAAQ,CAACQ,IAAI,EAAE;MAClC,IAAID,IAAI,EAAE;QACN,IAAIE,GAAG,GAAGJ,MAAM,CAACK,OAAO,CAAC,mDAAmD,CAAC;QAC7E,IAAID,GAAG,KAAK,IAAI,EAAG;UAEf,IAAGF,IAAI,CAACI,WAAW,KAAGJ,IAAI,CAACK,SAAS,EAAC;YACjCN,KAAK,CAAC,yBAAyB,CAAC;UACpC,CAAC,MACG;YACAV,QAAQ,CAAE,iBAAgBF,UAAW,EAAC,EAAE;cAACmB,OAAO,EAAG;YAAI,CAAC,CAAC;UAC7D;QACJ;MACJ,CAAC,MACG;QACAP,KAAK,CAAC,2BAA2B,CAAC;MACtC;IACJ,CAAC,MACG;MACAA,KAAK,CAAC,qCAAqC,CAAC;IAChD;EACJ;EAAC;EACD,MAAM,CAACQ,SAAS,EAAEC,YAAY,CAAC,GAAG7B,UAAU,CAACG,WAAW,CAAC;EACzDJ,SAAS,CAAC,MAAM;IACZ,eAAe+B,SAASA,CAAA,EAAG;MACvBD,YAAY,CAAEE,KAAK,KAAM;QAAE,GAAGA,KAAK;QAAEC,UAAU,EAAE9B,gBAAgB;MAAG,CAAC,CAAC,CAAC;IAC3E;IACA4B,SAAS,EAAE;IACX;EACF,CAAC,EAAE,CAACD,YAAY,CAAC,CAAC;EACpB;EACA,oBACIxB,OAAA;IAAK4B,SAAS,EAAC,MAAM;IAAAC,QAAA,gBACjB7B,OAAA,CAACJ,UAAU;MAAAkC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QAAE,eACbjC,OAAA,CAACZ,SAAS;MAAAyC,QAAA,gBACN7B,OAAA;QAAK4B,SAAS,EAAC,WAAW;QAAAC,QAAA,eACtB7B,OAAA;UAAA6B,QAAA,eAAQ7B,OAAA;YAAA6B,QAAA,EAAI;UAAW;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA;QAAK;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA;MAAS;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QACnC,eAENjC,OAAA;QAAK4B,SAAS,EAAC,QAAQ;QAAAC,QAAA,GACjBN,SAAS,CAACI,UAAU,KAAG,KAAK,iBAC1B3B,OAAA,CAACd,IAAI,CAACgD,KAAK;UAAAL,QAAA,eACP7B,OAAA,CAACV,IAAI;YAAC6C,EAAE,EAAC,YAAY;YAAAN,QAAA,eACjB7B,OAAA;cAAK4B,SAAS,EAAC,SAAS;cAAAC,QAAA,eACpB7B,OAAA,CAACb,MAAM;gBAACiD,IAAI,EAAC,IAAI;gBAACC,IAAI,EAAC,QAAQ;gBAAAR,QAAA,EAAC;cAAW;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA;YAAS;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA;UAClD;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA;QACH;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,QAEd,iBACGjC,OAAA,CAACd,IAAI,CAACgD,KAAK;UAAAL,QAAA,eACP7B,OAAA,CAACV,IAAI;YAAC6C,EAAE,EAAC,SAAS;YAAAN,QAAA,eACd7B,OAAA;cAAK4B,SAAS,EAAC,SAAS;cAAAC,QAAA,eACpB7B,OAAA,CAACb,MAAM;gBAACiD,IAAI,EAAC,IAAI;gBAACC,IAAI,EAAC,QAAQ;gBAAAR,QAAA,EAAE;cAAiB;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA;YAAS;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA;UACzD;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA;QACH;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,QAEd,eACDjC,OAAA;UAAK4B,SAAS,EAAC,WAAW;UAAAC,QAAA,eACtB7B,OAAA,CAACX,UAAU;YAAC+C,IAAI,EAAC,IAAI;YAAAP,QAAA,gBACjB7B,OAAA,CAACb,MAAM;cAACmD,OAAO,EAAC,SAAS;cAACC,EAAE,EAAC,IAAI;cAACC,QAAQ;cAAAX,QAAA,EAAC;YAAqB;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,QAAS,eACzEjC,OAAA,CAACd,IAAI,CAACuD,OAAO;cAACC,IAAI,EAAC,YAAY;cAACL,IAAI,EAAC,MAAM;cAACM,KAAK,EAAC,QAAQ;cAACC,WAAW,EAAC,aAAa;cAChFC,KAAK,EAAE1C,UAAW;cAAC2C,QAAQ,EAAEC,CAAC,IAAI3C,aAAa,CAAC2C,CAAC,CAACC,MAAM,CAACH,KAAK;YAAE;cAAAf,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,QAClE,eACFjC,OAAA,CAACb,MAAM;cAACiD,IAAI,EAAC,IAAI;cAACC,IAAI,EAAC,QAAQ;cAACY,OAAO,EAAE3C,WAAY;cAAAuB,QAAA,EAAC;YAAO;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,QAAS;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA;QAC7D;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,QACX;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QACJ;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QACE;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,QACV;AAEd;AAAC/B,EAAA,CAnFQD,OAAO;EAAA,QAGGV,WAAW;AAAA;AAAA2D,EAAA,GAHrBjD,OAAO;AAqFhB,eAAeA,OAAO;AAAA,IAAAiD,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}